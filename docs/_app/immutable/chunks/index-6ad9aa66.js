import{w as C}from"./index-06c10494.js";import{a8 as k,a9 as D,$ as P,aa as T}from"./index-7f92752a.js";function w(t){return Object.prototype.toString.call(t)==="[object Date]"}function j(t,n,e,i){if(typeof e=="number"||w(e)){const r=i-e,s=(e-n)/(t.dt||1/60),o=t.opts.stiffness*r,f=t.opts.damping*s,p=(o-f)*t.inv_mass,a=(s+p)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(r)<t.opts.precision?i:(t.settled=!1,w(e)?new Date(e.getTime()+a):e+a)}else{if(Array.isArray(e))return e.map((r,s)=>j(t,n[s],e[s],i[s]));if(typeof e=="object"){const r={};for(const s in e)r[s]=j(t,n[s],e[s],i[s]);return r}else throw new Error(`Cannot spring ${typeof e} values`)}}function q(t,n={}){const e=C(t),{stiffness:i=.15,damping:r=.8,precision:s=.01}=n;let o,f,p,a=t,y=t,c=1,h=0,g=!1;function u(d,l={}){y=d;const M=p={};return t==null||l.hard||m.stiffness>=1&&m.damping>=1?(g=!0,o=k(),a=d,e.set(t=y),Promise.resolve()):(l.soft&&(h=1/((l.soft===!0?.5:+l.soft)*60),c=0),f||(o=k(),g=!1,f=D(b=>{if(g)return g=!1,f=null,!1;c=Math.min(c+h,1);const A={inv_mass:c,opts:m,settled:!0,dt:(b-o)*60/1e3},O=j(A,a,t,y);return o=b,a=t,e.set(t=O),A.settled&&(f=null),!A.settled})),new Promise(b=>{f.promise.then(()=>{M===p&&b()})}))}const m={set:u,update:(d,l)=>u(d(y,t),l),subscribe:e.subscribe,stiffness:i,damping:r,precision:s};return m}function E(t,n){if(t===n||t!==t)return()=>t;const e=typeof t;if(e!==typeof n||Array.isArray(t)!==Array.isArray(n))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=n.map((r,s)=>E(t[s],r));return r=>i.map(s=>s(r))}if(e==="object"){if(!t||!n)throw new Error("Object cannot be null");if(w(t)&&w(n)){t=t.getTime(),n=n.getTime();const s=n-t;return o=>new Date(t+o*s)}const i=Object.keys(n),r={};return i.forEach(s=>{r[s]=E(t[s],n[s])}),s=>{const o={};return i.forEach(f=>{o[f]=r[f](s)}),o}}if(e==="number"){const i=n-t;return r=>t+r*i}throw new Error(`Cannot interpolate ${e} values`)}function z(t,n={}){const e=C(t);let i,r=t;function s(o,f){if(t==null)return e.set(t=o),Promise.resolve();r=o;let p=i,a=!1,{delay:y=0,duration:c=400,easing:h=T,interpolate:g=E}=P(P({},n),f);if(c===0)return p&&(p.abort(),p=null),e.set(t=r),Promise.resolve();const u=k()+y;let m;return i=D(d=>{if(d<u)return!0;a||(m=g(t,o),typeof c=="function"&&(c=c(t,o)),a=!0),p&&(p.abort(),p=null);const l=d-u;return l>c?(e.set(t=o),!1):(e.set(t=m(h(l/c))),!0)}),i.promise}return{set:s,update:(o,f)=>s(o(r,t),f),subscribe:e.subscribe}}export{q as s,z as t};
